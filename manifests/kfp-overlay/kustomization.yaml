apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Pull the upstream KFP platform-agnostic manifests directly from GitHub.
# This means we never fork KFP â€” upgrading is just bumping the ?ref= tag.
resources:
  - https://github.com/kubeflow/pipelines/manifests/kustomize/env/platform-agnostic?ref=2.15.0

patches:
  # EKS fix: EBS volumes mount as root:root. SeaweedFS runs as uid/gid 1000
  # and can't write to /data. fsGroup tells Kubernetes to chown the volume
  # to group 1000 before starting the container.
  - path: seaweedfs-fsgroup.yaml
    target:
      kind: Deployment
      name: seaweedfs
